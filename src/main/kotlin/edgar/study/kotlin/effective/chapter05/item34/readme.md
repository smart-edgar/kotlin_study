# 아이템34. 기본 생성자에 이름 있는 옵션 아규먼트를 사용하라

객체를 정의하고 생성하는 방법을 지정할 때 사용하는 가장 기본적인 방법은 기본 생성자(primary constructor)를 사용하는 것입니다.<br>
기본 생성자는 매우 편리합니다. 일반적으로는 이를 활용해서 객체를 만드는 것이 좋습니다.<br>
기본 생성자로 객체의 초기 상태를 나타내는 아규먼트를 전달합니다.

일반적으로 기본 생성자가 좋은 방식인 이유를 이해하려면 일단 생성자와 관련된 자바 패턴들을 이해하는 것이 좋습니다.
- 점층적 생성자 패턴(telescoping constructor pattern)
- 빌더 패턴(builder pattern)


## 점층적 생성자 패턴
점층적 생성자 패턴은 '여러가지 종류의 생성자를 사용하는' 굉장히 간단한 패턴입니다.<br>
코틀린에서는 기본적으로 디폴트 아규먼트를 사용합니다.<br>
디폴트 아규먼트는 코드를 단순하고 깔끔하게 만들어 줄 뿐만 아니라, 점층적 생성자보다 훨씬 다양한 기능을 제공합니다.

디폴트 아규먼트가 점층적 생성자보다 좋은 이유
- 파라미터들의 값을 원하는 대로 지정할 수 있습니다.
- 아규먼트를 원하는 순서로 지정할 수 있습니다.
- 명시적으로 이름을 붙여서 아규먼트를 지정하므로 의미가 훨씬 명확합니다.

디폴트 아규먼트를 사용하는 생성자가 점층적 생성자 패턴보다 훨씬 강력합니다.


## 빌더 패턴
자바에서는 이름 있는 파라미터와 디폴트 아규먼트를 사용할 수 없습니다.<br>
그래서 자바에서는 빌더 패턴을 사용합니다.

빌더패턴 장점
- 파라미터에 이름을 붙일 수 있습니다.
- 파라미터를 원하는 순서로 지정할 수 있습니다.
- 디폴트 값을 지정할 수 있습니다.

빌더 패턴을 사용하는 것보다 이름있는 파라미터를 사용하는 것이 좋은 이유
- 더 짧습니다 : 디폴트 아규먼트가 있는 생성자 또는 팩토리 메서드가 빌더 패턴보다 구현하기 훨씬 쉽습니다.
- 더 명확합니다 : 객체가 어떻게 생성되는지 확인하고 싶을 때 빌더 패턴은 여러 메서드들을 확인해야 하지만 디폴트 아규먼트가 있는 코드는 생성자 주변 부분만 확인하면 됩니다.
- 더 사용하기 쉽습니다 : 기본 생성자는 기본적으로 언어에 내장된 개념입니다. 하지만 빌더 패턴은 ㄴ언어 위에 추가로 구현한 개념이므로, 추가적인 knowledge가 필요합니다.
- 동시성과 관련된 문제가 없습니다 : 코틀린의 함수 파라미터는 항상 immutable 입니다. 하지만 대부분의 빌더 패턴에서는 프로퍼티는 mutable입니다. 따라서 빌더 패턴의 빌더 함수를 쓰레드 안전(thread-safe)하게 구현하는 것은 어렵습니다.

물론 무조건 빌더 패턴 대신 기본 생성자를 사용해야 한다는 것은 아닙니다.<br>
이러한 코드는 일반적으로 DSL(Domain Specific Language) 빌더를 사용합니다.<br>
DSL 빌더를 활용하는 패턴이 전통적인 빌더 패턴보다 훨씬 유연하고 명확해서 코틀린은 이와 같은 형태의 코드를 많이 사용합니다.<br>
DSL을 만드는 것이 조금 더 어렵습니다. 그러나 빌더를 만드는것도 그렇게 쉬운 일은 아닙니다.<br>
시간을 조금 더 투자하여 유연하고 가독성이 더 좋은 코드를 만들어 낼 수 있다면 그 방법을 사용하는게 더 좋을 것입니다. 그래서 DSL을 많이 사용합니다.


결론적으로 코틀린에서는 빌더 패턴을 거의 사용하지 않습니다.
빌더 패턴은 다음과 같은 경우에만 사용합니다.
- 빌더 패턴을 사용하는 다른 언어로 작성된 라이브러리를 그대로 옮길ㄹ때
- 디폴트 아규먼트와 DSL을 지원하지 않는 다른 언어에서 쉽게 사용할 수 있게 API를 설계할때 

이를 제외하면 빌더 패턴 대신에 디폴트 아규먼트를 갖는 기본 생성자 또는 DSL을 사용하는 것이 좋습니다.

## 정리
일반적인 프로젝트에서는 기본 생성자를 사용해 객체를 만듭니다.<br>
코틀린에서는 점층적 생성자 패턴을 사용하지 않습니다. 대신 디폴트 아규먼트를 활용하는 것이 좋습니다.<br>
디폴트 아규먼트는 더 짧고, 더 명확하고, 더 사용하기 쉽습니다.

# 아이템31. 문서로 규약을 정의하라
함수명, 코드 등의 내용만 보고서 어떤 동작을 할것인지 알수 있습니다.<br>
하지만 내부적으로 다른 동작으로도 가능한 함수라면(`fun showMessage()`) 명확하게 주석을 붙여서 설명해주는것이 좋습니다.

행위가 문서화되지 않고, 요소의 이름이 명확하지 않다면 이를 사용하는 사용자는 우리가 만들려고 했던 추상화 목표가 아닌, 현재 구현에만 의존하게 된다는 것입니다.<br>
이는 문서로 설명하므로써 해결합니다.


## 규약
어떤 행위를 설명하면 사용자는 이를 일종의 약속으로 취급하며, 이를 기반으로 스스로 자유롭게 생각하던 예측을 조정합니다.<br>
이처럼 예측되는 행위를 요소의 규약이라고 부릅니다.<br>
현실의 규약과 마찬가지로 규약의 당사자들은 서로 상대방이 규약을 안정적으로 계속 지킬 거라 믿습니다.<br>

규약이 적절하게 정의되어 있다면 클래스를 만든 사람은 클래스가 어떻게 사용될지 걱정하지 않아도 됩니다.<br>
따라서 규약만 지킨다면 원하는 부분을 마음대로 수정할 수 있습니다.<br>
서로가 규약을 존중한다면, 독립적으로 작업해도 모든 것이 정상적으로 가능할 것입니다. 이는 모두에게 편안함과 자유를 줍니다.

## 규약 정의하기
대표적인 몇가지 정리
- 이름 : 일반적인 개념과 관련된 메서드는 이름만으로 동작을 예측할 수 있습니다.
- 주석과 문서 : 필요한 모든 규약을 적을 수 있는 강력한 방법입니다.
- 타입 : 타입은 객체에 대한 많은 것을 알려줍니다.

## 주석을 써야 할까?
자바 커뮤니티 초기에는 `문학적 프로그래밍(Literate Programming)`이라는 개념이 있기있었습니다.<br>
주석으로 모든것을 살명하는 프로그래밍 방식입니다.<br>
하지만 10년이 지난 후에는 주석 없이도 읽을 수 있는 코드를 작성해야 하는 프로그래밍 방식으로 바뀌었습니다.<br>

극단적인 것은 언제나 좋지 않습니다.<br>
코드만 읽어도 어느정도 알수 있어야 하지만 주석을 함께 사용하면 요소(함수 또는 클래스)에 더 많은 내용의 규약을 설명할 수 있습니다.<br>
요즘의 주석은 문서를 자동 생성하는데 많이 사용됩니다.


## KDoc 형식
주석으로 함수를 문서화 할 때 사용되는 공식적인 형식을 KDoc이라고 부릅니다.<br>
KDoc 주석은 /**로 시작해서 */로 끝납니다. 이 사이의 모든 줄은 일반적으로 *로 시작합니다.

KDoc 주석의 구조
- 첫번쨰 부분은 요소에 대한 요약 설명입니다.
- 두번쨰 부분은 상세 설명입니다
- 이어지는 줄은 모두 태그로 시작합니다. 이러한 태그는 추가적인 설명을 위해 사용됩니다.

공식적인 코틀린 문서 생성도구는 Dokka 입니다.<br>
Dokka는 온라인에 게시하고 외부 사용자에게 제공할 수 있는 문서 파일을 만들어 줍니다.


## 타입 시스템과 예측
타입 계층은 객체와 관련된 중요한 정보입니다.<br>
인터페이스는 우리가 구현해야 한다고 약속한 메서드 목록 이상의 의미를 갖습니다.<br>
클래스와 인터페이스에도 여러가지 예측이 들어갑니다.<br>
클래스가 어떤 동작을 할것이라 예측되면 그 서브클래스도 이를 보장해야 합니다. 이를 <b>리스코프 치환 원칙(Liskov substitution principle)</b>이라고 부릅니다.<br>

사용자가 클래스의 동작을 확실하게 예측할 수 있게 하려면 공개 함수에 대한 규약을 잘 지정해야 합니다.<br>
인터페이스를 활용하면 규약을 더 잘 지정할 수 있습니다.


## 조금씩 달라지는 세부 사항
구현의 세부적인 내용은 항상 조금씩 다릅니다.<br>
세부규칙은 항상 달라질 수 있지만 최대한 많이 보호하는 것이 좋습니다.<br>
일반적으로 캡슐화를 통해서 이를 보호합니다.<br>
켑슐화는 '허용하는 범위'를 지정하는데 도움을 주는 도구입니다.<br>
캡슐화가 많이 적용될수록 사용자가 구현에 신경을 많이 쓸 필요가 없어지므로 더 많은 자유를 갖게 됩니다.

## 정리
요소, 특히 외부 API를 구현할 때는 규약을 잘 정의해야 합니다.<br>
규약은 이름, 문서, 주서그 타입을 통해 구현할 수 있습니다.<br>
규약은 요소가 어떻게 동작하고 앞으로 어떻게 동작할지를 사용자에게 전달해 줍니다.<br>
규약은 단순한 합의지만 양쪽 모두가 그 합의를 존중한다면 큰 문제가 없을 것입니다.
